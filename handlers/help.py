import logging
from aiogram import Router, F
from aiogram.types import Message
from aiogram.filters import Command

from database.db import Database
from keyboards.main import get_main_keyboard

logger = logging.getLogger(__name__)

router = Router()


@router.message(F.text == "‚ùì –ü–æ–º–æ—â—å")
@router.message(Command("help"))
async def show_help(message: Message, db: Database):
    """Show help message with commands list"""
    
    users_count = db.get_users_count()
    
    help_text = (
        "‚ùì <b>–°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É</b>\n\n"
        "<b>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n\n"
        "/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º / –ò–∑–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É\n"
        "/help - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É\n\n"
        "<b>–ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é:</b>\n\n"
        "üìÖ <b>–°–µ–≥–æ–¥–Ω—è</b> - –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è\n"
        "üìÜ <b>–ó–∞–≤—Ç—Ä–∞</b> - –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞\n"
        "<b>–ü–Ω, –í—Ç, –°—Ä, –ß—Ç, –ü—Ç, –°–±</b> - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å\n\n"
        "üë§ <b>–ü—Ä–æ—Ñ–∏–ª—å</b> - –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –ø—Ä–æ—Ñ–∏–ª–µ\n"
        "‚öôÔ∏è <b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</b> - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\n"
        "‚ùì <b>–ü–æ–º–æ—â—å</b> - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É\n\n"
        "<b>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:</b>\n\n"
        "üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–∞—Ä–∞—Ö - –≤ 7:30 (1,3 –∫—É—Ä—Å) –∏ 10:00 (2 –∫—É—Ä—Å)\n"
        "üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö - –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è\n"
        "üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ - –≤–µ—á–µ—Ä–æ–º –æ –Ω–æ–≤–æ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏\n\n"
        f"üë• <b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ—Ç–∞:</b> {users_count}\n\n"
        "üìã –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å —Å–∞–π—Ç–∞:\n"
        "https://pkeu.ru/sites/default/files/Files_up_page/\n\n"
        "‚ùì –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã,\n"
        "–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –∫–æ–ª–ª–µ–¥–∂–∞."
    )
    
    await message.answer(
        help_text,
        parse_mode="HTML",
        reply_markup=get_main_keyboard(),
        disable_web_page_preview=True
    )
